<!DOCTYPE html>
<html lang="bg">

<head>
  <meta charset="UTF-8">
  <title>Профил | DesignRealm</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header>
    <div class="logo">
      <a href="index.html">
        <img src="images/logo_notext.png" alt="DesignRealm Logo" class="logo-img">
        <span>DesignRealm</span>
      </a>
    </div>
    <nav id="nav">
      <a href="index.html">Начало</a>
      <a href="catalog.html">Каталог</a>
      <a href="profile.html" class="active">Профил</a>
    </nav>
    <button id="menu-toggle">☰</button>
  </header>

  <main class="profile">
    <section class="hero">
      <div class="hero-text">
        <h1>Вашият профил</h1>
        <p class="subtitle">Управлявайте информацията и настройките на своя акаунт.</p>
      </div>
    </section>

    <section style="max-width:720px; margin:1.5rem auto;">
      <div class="card profile-card" style="display:flex;gap:1rem;align-items:center;">
        <img src="images/avatar_placeholder.png" alt="avatar"
          style="width:96px;height:96px;border-radius:12px;object-fit:cover">
        <div>
          <p><strong>Email:</strong> <span id="profile-email">...</span></p>
          <p><strong>Роля:</strong> <span id="profile-role">...</span></p>
          <a href="upload.html" class="btn">Качи модел</a>
        </div>
      </div>
    </section>

    <a href="index.html" class="btn">← Начало</a>
  </main>

  <footer>
    <p>© 2025 DesignRealm. Всички права запазени.</p>
  </footer>

  <script type="module" src="profile.js"></script>
  <script type="module">
    import { auth, db } from "./firebase-init.js";
    import { doc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

    onAuthStateChanged(auth, async user => {
      if (!user) return;
      const emailEl = document.getElementById("profile-email");
      const roleEl = document.getElementById("profile-role");
      if (emailEl) emailEl.textContent = user.email;
      try {
        const snap = await getDoc(doc(db, "users", user.uid));
        if (snap.exists() && roleEl) roleEl.textContent = snap.data().role || "user";
      } catch (err) {
        console.error(err);
      }
    });
  </script>
</body>

</html>