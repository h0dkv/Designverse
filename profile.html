<!DOCTYPE html>
<html lang="bg">

<head>
  <meta charset="UTF-8">
  <title>–ü—Ä–æ—Ñ–∏–ª | DesignRealm</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <h1>üë§ –ú–æ—è—Ç –ø—Ä–æ—Ñ–∏–ª</h1>

  <div id="profile-box">
    <p><strong>–ò–º–µ–π–ª:</strong> <span id="profile-email"></span></p>
    <p><strong>–†–æ–ª—è:</strong> <span id="profile-role"></span></p>

    <a href="upload.html" class="btn">‚¨ÜÔ∏è –ö–∞—á–∏ –º–æ–¥–µ–ª</a>
    <a href="index.html" class="btn">‚¨ÖÔ∏è –ù–∞—á–∞–ª–æ</a>
  </div>

  <script type="module" src="profile.js"></script>
  <script>
    import { auth, db } from "./firebase-init.js";
    import { onAuthStateChanged } from
      "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
    import { doc, getDoc } from
      "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

    onAuthStateChanged(auth, async (user) => {
      if (!user) return;

      const snap = await getDoc(doc(db, "users", user.uid));
      if (!snap.exists()) return;

      const data = snap.data();
      document.getElementById("profile-email").textContent = user.email;
      document.getElementById("profile-role").textContent = data.role;
    });
  </script>
</body>

</html>