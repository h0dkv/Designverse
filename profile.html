<!DOCTYPE html>
<html lang="bg">

<head>
  <meta charset="UTF-8">
  <title>–ü—Ä–æ—Ñ–∏–ª | DesignRealm</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header>
    <div class="logo">
      <a href="index.html">
        <img src="images/logo_notext.png" alt="DesignRealm Logo" class="logo-img">
        <span>DesignRealm</span>
      </a>
    </div>
    <nav id="nav">
      <a href="index.html">–ù–∞—á–∞–ª–æ</a>
      <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
      <a href="profile.html" class="active">–ü—Ä–æ—Ñ–∏–ª</a>
    </nav>
    <button id="menu-toggle">‚ò∞</button>
  </header>

  <main class="profile">
    <section class="hero">
      <div class="hero-text">
        <h1>–í–∞—à–∏—è—Ç –ø—Ä–æ—Ñ–∏–ª</h1>
        <p class="subtitle">–£–ø—Ä–∞–≤–ª—è–≤–∞–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –Ω–∞ —Å–≤–æ—è –∞–∫–∞—É–Ω—Ç.</p>
      </div>
    </section>

    <section style="max-width:720px; margin:1.5rem auto;">
      <div class="card profile-card" style="display:flex;gap:1rem;align-items:center;">
        <img src="images/avatar_placeholder.png" alt="avatar"
          style="width:96px;height:96px;border-radius:12px;object-fit:cover">
        <div>
          <p><strong>Email:</strong> <span id="profile-email">...</span></p>
          <p><strong>–†–æ–ª—è:</strong> <span id="profile-role">...</span></p>
          <a href="upload.html" class="btn">–ö–∞—á–∏ –º–æ–¥–µ–ª</a>
        </div>
      </div>
    </section>

    <section class="profile-card">
      <img id="profile-avatar" src="images/default-avatar.png">
      <h2 id="profile-username">User</h2>
      <span class="role-badge student">Student</span>
      <p class="join-date">–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω: 2025</p>

      <button class="btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π –ø—Ä–æ—Ñ–∏–ª</button>
    </section>

    <section class="profile-section">
      <h3>üéì –ú–æ—è—Ç–∞ —Ä–æ–ª—è</h3>
      <ul>
        <li>‚úî –î–æ—Å—Ç—ä–ø –¥–æ –∫–∞—Ç–∞–ª–æ–≥–∞</li>
        <li>‚úî –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∏</li>
        <li class="disabled">‚ùå –û–¥–æ–±—Ä—è–≤–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∏</li>
      </ul>
    </section>

    <section class="profile-section">
      <h3>üì¶ –ú–æ–∏—Ç–µ –º–æ–¥–µ–ª–∏</h3>
      <div class="grid" id="my-models"></div>
    </section>

    <section class="profile-section">
      <h3>‚ù§Ô∏è –õ—é–±–∏–º–∏ –º–æ–¥–µ–ª–∏</h3>
      <a href="favorites.html" class="btn">–û—Ç–≤–æ—Ä–∏ –õ—é–±–∏–º–∏</a>
    </section>

    <section class="profile-section">
      <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
      <label>
        <input type="checkbox" id="dark-mode">
        –¢—ä–º–µ–Ω —Ä–µ–∂–∏–º
      </label>

      <label>
        <input type="checkbox" id="christmas-mode">
        –ö–æ–ª–µ–¥–µ–Ω —Ä–µ–∂–∏–º
      </label>
    </section>

    <a href="index.html" class="btn">‚Üê –ù–∞—á–∞–ª–æ</a>
  </main>

  <footer>
    <p>¬© 2025 DesignRealm. –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.</p>
  </footer>

  <script type="module" src="profile.js"></script>
  <script type="module">
    import { auth, db } from "./firebase-init.js";
    import { doc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

    onAuthStateChanged(auth, async user => {
      if (!user) return;
      const emailEl = document.getElementById("profile-email");
      const roleEl = document.getElementById("profile-role");
      if (emailEl) emailEl.textContent = user.email;
      try {
        const snap = await getDoc(doc(db, "users", user.uid));
        if (snap.exists() && roleEl) roleEl.textContent = snap.data().role || "user";
      } catch (err) {
        console.error(err);
      }
    });
  </script>
</body>

</html>